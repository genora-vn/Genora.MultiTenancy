@page
@using Genora.MultiTenancy.Localization
@using Genora.MultiTenancy.Web.Pages.AppCustomers
@using Microsoft.Extensions.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal
@model CreateModalModel
@inject IStringLocalizer<MultiTenancyResource> L
@{
    Layout = null;

    var dobText = Model.Customer?.DateOfBirth.HasValue == true
        ? Model.Customer.DateOfBirth.Value.ToString("dd/MM/yyyy")
        : string.Empty;

    var isFollower = Model.Customer?.IsFollower == true;
}

<form asp-page="/AppCustomers/CreateModal" method="post" id="CreateCustomerForm">
    <abp-modal>
        <abp-modal-header title="@L["CreateAppCustomer"]"></abp-modal-header>

        <abp-modal-body>
            <input type="hidden" asp-for="Customer.AvatarUrl" />

            <div class="row g-3">
                <div class="col-md-3">
                    <abp-input asp-for="Customer.CustomerCode"
                               label="@L["CustomerCode"]"
                               readonly="true"
                               class="readonly-gray" />
                </div>

                <div class="col-md-5">
                    <abp-input asp-for="Customer.FullName"
                               label="@L["FullName"]"
                               placeholder="Nguyễn Văn A" />
                </div>

                <div class="col-md-4">
                    <abp-input asp-for="Customer.PhoneNumber"
                               label="@L["PhoneNumber"]"
                               placeholder="0912345678" />
                </div>
            </div>

            <div class="row g-3">
                <div class="col-md-3">
                    <label asp-for="Customer.DateOfBirth" class="form-label">@L["DateOfBirth"]</label>
                    <input asp-for="Customer.DateOfBirth"
                           type="text"
                           class="form-control dob-input"
                           value="@dobText"
                           placeholder="01/01/1980"
                           autocomplete="off" />
                </div>

                <div class="col-md-3">
                    <abp-select asp-for="Customer.Gender"
                                asp-items="Model.GenderItems"
                                label="@L["Gender"]" />
                </div>

                <div class="col-md-6">
                    <abp-input asp-for="Customer.Email"
                               label="@L["Email"]"
                               placeholder="abc@xyz.com" />
                </div>
            </div>

            <div class="row g-3">
                <div class="col-md-12">
                    <abp-input asp-for="Customer.Address"
                               label="@L["Address"]"
                               type="text"
                               placeholder="Đường A, phường B, thành phố D,..." />
                </div>
            </div>

            <div class="row g-3">
                <div class="col-md-4">
                    <abp-select asp-for="Customer.ProvinceCode"
                                asp-items="Model.ProvinceItems"
                                label="Tỉnh / Thành phố" />
                </div>

                <div class="col-md-4">
                    <abp-select asp-for="Customer.CustomerTypeId"
                                asp-items="Model.CustomerTypeItems"
                                label="@L["CustomerType"]" />
                </div>

                <div class="col-md-4">
                    <abp-input asp-for="Customer.VgaCode"
                               label="@L["VgaCode"]"
                               type="text"
                               placeholder="ABC12345" />
                </div>
            </div>

            <div class="row g-3">
                <div class="col-md-4">
                    <abp-input asp-for="Customer.ZaloUserId"
                               label="@L["ZaloUserId"]"
                               placeholder="1234567890" />
                </div>

                <div class="col-md-4">
                    <div class="form-check mt-4 pt-1">
                        <input class="form-check-input"
                               type="checkbox"
                               disabled
                               @(isFollower ? "checked" : "") />
                        <label class="form-check-label">
                            @(isFollower ? "Đã quan tâm Zalo OA" : "Chưa quan tâm Zalo OA")
                        </label>

                        <input type="hidden" name="Customer.IsFollower" value="@(isFollower ? "true" : "false")" />
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="mt-4 pt-1">
                        <abp-input asp-for="Customer.IsActive" label="Được hoạt động" />
                    </div>
                </div>
            </div>
        </abp-modal-body>

        <abp-modal-footer buttons="@(AbpModalButtons.Cancel | AbpModalButtons.Save)"></abp-modal-footer>
    </abp-modal>
</form>

<style type="text/css">
    .modal-dialog {
        max-width: 55%;
    }

    .readonly-gray input[readonly] {
        background: #e0e0e0 !important;
        color: #555 !important;
        font-weight: 600;
        cursor: not-allowed;
    }
</style>
